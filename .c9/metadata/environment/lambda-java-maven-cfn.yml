{"changed":true,"filter":false,"title":"lambda-java-maven-cfn.yml","tooltip":"/lambda-java-maven-cfn.yml","value":"AWSTemplateFormatVersion: 2010-09-09\n\n# Simple CI/CD Pipeline using native AWS services,\n# integrated with github source code repository\n\n# Authors:  Ryan Russell\n#           Michael Hansen\n#           Billy Glenn\n\n# Version 0.40 \n# Revision Date: 8/21/2018\n\n# The Interface Metadata key provides structure for the U/I\n# as rendered in the AWS Web Console when launching a CloudFormation\n# template.  This allows grouping and ordering of parameters,\n# assigning user-friendly labels and more.\n\nMetadata: \n  AWS::CloudFormation::Interface: \n    ParameterGroups: \n      - \n        Label:\n          default: \"GitHub Configuration\"\n        Parameters:\n          - pGitHubAccount\n          - pGitHubRepo\n          - pGitHubRepoBranch\n          - pGitHubToken\n      -\n        Label:\n          default: \"Pipeline Configuration\"\n        Parameters:\n          - pPipelineBucketName\n          - pDynamoDbTableArn\n      -\n        Label:\n          default: \"Tags\"\n        Parameters:\n          - pApplicationName\n          - pEnv\n          - pCFNOwnerTag\n    \n    ParameterLabels:\n      pGitHubAccount:\n        default: \"GitHub Account\"\n      pGitHubRepo:\n        default: \"Source Repository\"\n      pGitHubRepoBranch:\n        default: \"Repo Branch\"\n      pGitHubToken:\n        default: \"GitHub Access Token\"\n      pPipelineBucketName:\n        default: \"S3 Artifact Bucket Name\"\n      pDynamoDbTableArn:\n        default: \"DynamoDB Table ARN\"\n      pApplicationName:\n        default: \"Application Name\"\n      pEnv:\n        default: \"Environment\"\n      pCFNOwnerTag:\n        default: \"CorpID of Owner\"\n\n\n\n# Paramaters that the user will be prompted for when running this template\n# Note that the values from these parameters will be used and referenced\n#  by the resources below\n\nParameters:\n  # GitHub Personal Access Token for accessing the target repository\n  pGitHubToken:\n    Type: 'String'\n    Description: \"Enter the GitHub Access Token\"\n    NoEcho: true\n\n  # GitHub account or organization that owns the target repository\n  pGitHubAccount:\n    Type: 'String'\n    Description: \"Enter the GitHub Account Name\"\n\n  # Specific GitHub target repository  - do not include .git extension\n  pGitHubRepo:\n    Type: 'String'\n    Description: \"Enter the GitHub Repo Name\"\n\n  # Specify the branch (master, dev, feature, etc) within repo\n  pGitHubRepoBranch:\n    Type: 'String'\n    Default: 'dev'\n    Description: \"Enter the Branch (dev, master, feature, etc) you wish to pull from the GitHub repo\"\n\n  # Specify S3 bucket to contain pipeline / build artifacts \n  pPipelineBucketName:\n    Type: 'String'\n    Description: \"The name of the S3 bucket that will contain the pipeline artifacts\"\n\n  # CorpID of the person who 'owns' the stack and associated resources\n  pCFNOwnerTag:\n    Type: 'String'\n    Description: \"Enter CorpID of the owner of this stack (for tagging of resources)\"\n\n  # Environment specification (appended to tags, etc)\n  pEnv:\n    Type: 'String'\n    Description: \"The environment\"\n    AllowedValues:\n      - 'PROD'\n      - 'QA'\n      - 'TEST'\n      - 'DEV'\n\n  # Application Name (used in stack / resource names, tags)\n  pApplicationName:\n    Type: 'String'\n    Description: \"The name of the application\"\n\n  # DynamoDB Table name - from Lambda101 Workshop\n  pDynamoDbTableArn:\n    Type: 'String'\n    Description: \"DynamoDB Table ARN (from Lambda101 Workshop)\"\n    Default: \"arn:aws:dynamodb:us-east-1:123456789101:table/user-info-mehs\"\n\n# The following sections define the various AWS resources,\n# and their specific configurations, created by this template\n\nResources:\n\n# AWS IAM Role to be used with the AWS CodePipeline defined below\n# Allows CodePipeline to assume the role, perform appropriate actions\n# (logging, CodeBuild, S3, etc) on associated resources\n  rPipelineRole:\n    Type: AWS::IAM::Role\n    Properties:\n      RoleName: !Sub '${AWS::StackName}-PIPELINE-ROLE-${pEnv}'\n      AssumeRolePolicyDocument:\n        Version: '2012-10-17'\n        Statement:\n        - Effect: Allow\n          Principal: {Service: [codepipeline.amazonaws.com]}\n          Action: ['sts:AssumeRole']\n      Policies:\n      - PolicyName: !Sub '${AWS::StackName}-PIPELINE-POLICY-${pEnv}'\n        PolicyDocument:\n          Version: '2012-10-17'\n          Statement:\n            - Effect: Allow\n              Action:\n                - 'logs:CreateLogGroup'\n                - 'logs:CreateLogStream'\n                - 'logs:PutLogEvents'\n                - 'logs:DescribeLogStreams'\n              Resource: '*'\n            - Effect: Allow\n              Action:\n                - 'codebuild:BatchGetBuilds'\n              Resource: '*'\n            - Effect: Allow\n              Action:\n                - 'codebuild:StartBuild'\n              Resource:\n                - !GetAtt rBuildProject.Arn\n            - Effect: Allow\n              Action:\n                - 's3:PutObject'\n                - 's3:ListObjects'\n                - 's3:GetObject'\n                - 's3:ListBucket'\n              Resource:\n                - !GetAtt rPipelineBucket.Arn\n                - !Join\n                  - ''\n                  - - !GetAtt rPipelineBucket.Arn\n                    - '/*'\n              Resource: '*'\n\n  # AWS IAM Role to be used with the AWS CodeBuild Project defined above\n  # to interact with / perform desired functions (logging, s3, lambda update)\n  rBuildProjectRole:\n    Type: AWS::IAM::Role\n    Properties:\n      RoleName: !Sub '${AWS::StackName}-BUILDPROJECT-ROLE-${pEnv}'\n      AssumeRolePolicyDocument:\n        Version: '2012-10-17'\n        Statement:\n        - Effect: Allow\n          Principal: {Service: [codebuild.amazonaws.com]}\n          Action: ['sts:AssumeRole']\n      Policies:\n      - PolicyName: !Sub '${AWS::StackName}-BUILDPROJECT-POLICY-${pEnv}'\n        PolicyDocument:\n          Version: '2012-10-17'\n          Statement:\n            - Effect: Allow\n              Action:\n                - 'logs:CreateLogGroup'\n                - 'logs:CreateLogStream'\n                - 'logs:PutLogEvents'\n                - 'logs:DescribeLogStreams'\n              Resource: '*'\n            - Effect: Allow\n              Action:\n                - 's3:PutObject'\n                - 's3:ListObjects'\n                - 's3:GetObject'\n                - 's3:ListBucket'\n              Resource:\n                - !GetAtt rPipelineBucket.Arn\n                - !Join\n                  - ''\n                  - - !GetAtt rPipelineBucket.Arn\n                    - '/*'\n            - Effect: Allow\n              Action:\n                - 'lambda:UpdateFunctionCode'\n              Resource:\n                - !GetAtt rLambdaFunction.Arn\n\n  # AWS IAM Role to be used with the AWS Lambda Function defined below\n  rLambdaFunctionRole:\n    Type: AWS::IAM::Role\n    Properties:\n      RoleName: !Sub '${AWS::StackName}-LAMBDA-ROLE-${pEnv}'\n      AssumeRolePolicyDocument:\n        Version: '2012-10-17'\n        Statement:\n        - Effect: Allow\n          Principal: {Service: [lambda.amazonaws.com]}\n          Action: ['sts:AssumeRole']\n      Policies:\n      - PolicyName: !Sub '${AWS::StackName}-LAMBDA-LOGGING-POLICY-${pEnv}'\n        PolicyDocument:\n          Version: '2012-10-17'\n          Statement:\n            - Effect: Allow\n              Action:\n                - 'logs:CreateLogGroup'\n                - 'logs:CreateLogStream'\n                - 'logs:PutLogEvents'\n                - 'logs:DescribeLogStreams'\n              Resource: '*'\n      - PolicyName: !Sub '${AWS::StackName}-LAMBDA-DYNAMO-POLICY-${pEnv}'    \n        PolicyDocument:\n          Version: '2012-10-17'\n          Statement:\n            - Effect: Allow\n              Action:\n                - 'dynamodb:*'\n              Resource: !Ref pDynamoDbTableArn    \n\n  # AWS S3 Bucket configuration (must be globally unique and not exist)\n  # This bucket will be used to hold the pipeline artifacts (source, build)\n  rPipelineBucket:\n    Type: \"AWS::S3::Bucket\"\n    Properties:\n      # Bucket name is pulled from user-provided parameter\n      BucketName: !Ref pPipelineBucketName\n      # Tags populated with paramaters provided above\n      Tags:\n        - Key: CFNOwner\n          Value: !Ref pCFNOwnerTag\n        - Key: ENV\n          Value: !Ref pEnv\n        - Key: AppName\n          Value: !Ref pApplicationName\n\n  # AWS CodePipeline Configuration\n  rPipeline:\n    Type: \"AWS::CodePipeline::Pipeline\"\n    # Properties for the CodePipeline resource\n    Properties:\n      Name: !Sub '${AWS::StackName}-PIPELINE-${pEnv}'\n      RoleArn: !GetAtt rPipelineRole.Arn\n      ArtifactStore:\n        Type: S3\n        Location:\n          Ref: rPipelineBucket\n      # Define the various Pipeline Stages and Actions\n      \n      Stages:\n      # Source Stage:  Watch GitHub, trigger pipeline on repo change\n        - Name: Source\n          Actions:\n            - Name: SourceAction\n              ActionTypeId:\n                Category: Source\n                Owner: ThirdParty\n                Version: 1\n                Provider: GitHub\n              OutputArtifacts:\n                - Name: SourceOuput\n              # GitHub Repo details provided in parameters above\n              Configuration:\n                Owner: !Ref pGitHubAccount\n                Repo: !Ref pGitHubRepo\n                # Poll GitHub (every 30 seconds) for changes\n                PollForSourceChanges: 'true'\n                Branch: !Ref pGitHubRepoBranch\n                OAuthToken: !Ref pGitHubToken\n              RunOrder: 1\n      # Build Stage:  CodeBuild Action (see further below)  \n        - Name: BuildDeploy\n          Actions:\n            - Name: CodeBuild\n              InputArtifacts:\n                - Name: SourceOuput\n              ActionTypeId:\n                Category: Build\n                Owner: AWS\n                Version: 1\n                Provider: CodeBuild\n              OutputArtifacts:\n                - Name: BuildOutput\n              Configuration:\n                ProjectName:\n                  Ref: rBuildProject\n              RunOrder: 1\n\n  # AWS CodeBuild Project definition (language, build server, buildspec)\n  rBuildProject:\n    Type: \"AWS::CodeBuild::Project\"\n    Properties:\n      Name: !Sub '${AWS::StackName}-BUILDPROJECT-${pEnv}'\n      ServiceRole: !Ref rBuildProjectRole\n      BadgeEnabled: 'false'\n      Artifacts:\n        Type: CODEPIPELINE\n      Environment:\n        Type: LINUX_CONTAINER\n        ComputeType: BUILD_GENERAL1_SMALL\n        PrivilegedMode: 'false'\n        # Specifying our build server container image\n        # TODO:  Parameterize this for 'selectable' pipeline\n        Image: aws/codebuild/java:openjdk-8\n      Source:\n        Type: CODEPIPELINE\n        \n        # Here's the BuildSpec that will be applied via CodeBuild\n        # TODO:  Externalize this to look for buildspec.yml in repo\n        BuildSpec: !Sub |\n          version: 0.2\n          phases:\n            build:\n              commands:\n                - echo Build started on `date`\n                - ls -la\n                - cd aws-app\n                - mvn package\n                - aws lambda update-function-code --function-name ${rLambdaFunction} --zip-file fileb://./target/lambda-java-example-1.0-SNAPSHOT.jar\n            post_build:\n              commands:\n                - echo Build completed on `date`\n      TimeoutInMinutes: 10\n      Cache:\n        Type: NO_CACHE\n      # Tag all the things (from parameter values)\n      Tags:\n        - Key: CFNOwner\n          Value: !Ref pCFNOwnerTag\n        - Key: ENV\n          Value: !Ref pEnv\n        - Key: AppName\n          Value: !Ref pApplicationName\n\n\n\n  # AWS Lambda Configuration\n  # This is the 'target' of our deployment step (final step of buildspec)\n  \n  # **** TODO: We need a param for the class name in the Handler\n\n  rLambdaFunction:\n    Type: AWS::Lambda::Function\n    Properties:\n      FunctionName: !Sub '${AWS::StackName}-LAMBDA-${pEnv}'\n      Timeout: 10\n      Runtime: java8\n      Handler: com.amazonaws.lambda.demo.Hello::handleRequest\n      Role: !GetAtt rLambdaFunctionRole.Arn\n      Environment:\n        Variables:\n          ENV: !Ref pEnv\n          FunctionName: !Sub '${AWS::StackName}-LAMBDA-${pEnv}'\n      # Tag all the things (from parameter values)\n      Tags:\n        - Key: CFNOwner\n          Value: !Ref pCFNOwnerTag\n        - Key: ENV\n          Value: !Ref pEnv\n        - Key: AppName\n          Value: !Ref pApplicationName\n      Code:\n        S3Bucket: \"mehs-lambda-deploy-east\"\n        S3Key: \"lambda-java-example-1.0-SNAPSHOT.jar\"\n        \n        # Things we changed\n        # Line 333 changed to aws/codebuild/java:openjdk-8 which has Java8 and Maven\n        # Line 339-352 - Changed the build spec\n        # changed line 393-394 - Total hack using an S3 bucket but not sure what else to do\n        # changed handler on line 378\n        \n        \n        \n        # Build Spec changes to not use S3: Line 348 and 349 can probably be replace by: \n        # - aws lambda update-function-code --function-name ${rLambdaFunction} --zip-file fileb://./target/lambda-java-example-1.0-SNAPSHOT.jar\n        # - aws s3 cp target/lambda-java-example-1.0-SNAPSHOT.jar s3://mehs-lambda-deploy-east\n        #- aws lambda update-function-code --function-name ${rLambdaFunction} --s3-bucket mehs-lambda-deploy-east --s3-key lambda-java-example-1.0-SNAPSHOT.jar --publish\n                \n        # Build spec reference: how can we prompt for the name of the file?  or, can maven create a consistantly named jar file\n        # Maybe something like this:\n        # <packaging>jar</packaging>\n        # <build>\n        #   <finalName>pipeline-output.jar</finalName>\n        # </build>\n        \n        # Build Spec: Let's pull the build spec out in to a buildpec.yml file \n        \n        # Initial code: Line 392-394 create an odd dependancy.  How can we solve that?  Do we create a bucket on the fly and put a hello world jar file in it?\n        \n        # Maybe leave for the workshop????: can/should we remove 117-121???\n        \n       \n        \n        \n        \n        ","undoManager":{"mark":80,"position":100,"stack":[[{"start":{"row":409,"column":39},"end":{"row":409,"column":40},"action":"insert","lines":[" "],"id":290},{"start":{"row":409,"column":40},"end":{"row":409,"column":41},"action":"insert","lines":["i"]},{"start":{"row":409,"column":41},"end":{"row":409,"column":42},"action":"insert","lines":["n"]}],[{"start":{"row":409,"column":42},"end":{"row":409,"column":43},"action":"insert","lines":[" "],"id":291},{"start":{"row":409,"column":43},"end":{"row":409,"column":44},"action":"insert","lines":["t"]},{"start":{"row":409,"column":44},"end":{"row":409,"column":45},"action":"insert","lines":["o"]}],[{"start":{"row":409,"column":45},"end":{"row":409,"column":46},"action":"insert","lines":[" "],"id":292},{"start":{"row":409,"column":46},"end":{"row":409,"column":47},"action":"insert","lines":["a"]}],[{"start":{"row":409,"column":47},"end":{"row":409,"column":48},"action":"insert","lines":[" "],"id":293},{"start":{"row":409,"column":48},"end":{"row":409,"column":49},"action":"insert","lines":["b"]},{"start":{"row":409,"column":49},"end":{"row":409,"column":50},"action":"insert","lines":["u"]},{"start":{"row":409,"column":50},"end":{"row":409,"column":51},"action":"insert","lines":["i"]},{"start":{"row":409,"column":51},"end":{"row":409,"column":52},"action":"insert","lines":["l"]},{"start":{"row":409,"column":52},"end":{"row":409,"column":53},"action":"insert","lines":["d"]}],[{"start":{"row":409,"column":53},"end":{"row":409,"column":54},"action":"insert","lines":["p"],"id":294},{"start":{"row":409,"column":54},"end":{"row":409,"column":55},"action":"insert","lines":["e"]},{"start":{"row":409,"column":55},"end":{"row":409,"column":56},"action":"insert","lines":["c"]},{"start":{"row":409,"column":56},"end":{"row":409,"column":57},"action":"insert","lines":["."]}],[{"start":{"row":409,"column":57},"end":{"row":409,"column":58},"action":"insert","lines":["y"],"id":295},{"start":{"row":409,"column":58},"end":{"row":409,"column":59},"action":"insert","lines":["m"]},{"start":{"row":409,"column":59},"end":{"row":409,"column":60},"action":"insert","lines":["l"]}],[{"start":{"row":409,"column":60},"end":{"row":409,"column":61},"action":"insert","lines":[" "],"id":296},{"start":{"row":409,"column":61},"end":{"row":409,"column":62},"action":"insert","lines":["f"]},{"start":{"row":409,"column":62},"end":{"row":409,"column":63},"action":"insert","lines":["i"]},{"start":{"row":409,"column":63},"end":{"row":409,"column":64},"action":"insert","lines":["l"]},{"start":{"row":409,"column":64},"end":{"row":409,"column":65},"action":"insert","lines":["e"]}],[{"start":{"row":409,"column":65},"end":{"row":410,"column":0},"action":"insert","lines":["",""],"id":297},{"start":{"row":410,"column":0},"end":{"row":410,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":409,"column":7},"end":{"row":409,"column":65},"action":"remove","lines":[" # Let's pull the build spec out in to a buildpec.yml file"],"id":298}],[{"start":{"row":404,"column":7},"end":{"row":404,"column":65},"action":"insert","lines":[" # Let's pull the build spec out in to a buildpec.yml file"],"id":299}],[{"start":{"row":404,"column":10},"end":{"row":404,"column":11},"action":"insert","lines":["B"],"id":300},{"start":{"row":404,"column":11},"end":{"row":404,"column":12},"action":"insert","lines":["u"]},{"start":{"row":404,"column":12},"end":{"row":404,"column":13},"action":"insert","lines":["i"]},{"start":{"row":404,"column":13},"end":{"row":404,"column":14},"action":"insert","lines":["l"]},{"start":{"row":404,"column":14},"end":{"row":404,"column":15},"action":"insert","lines":["d"]}],[{"start":{"row":404,"column":15},"end":{"row":404,"column":16},"action":"insert","lines":[" "],"id":301},{"start":{"row":404,"column":16},"end":{"row":404,"column":17},"action":"insert","lines":["S"]},{"start":{"row":404,"column":17},"end":{"row":404,"column":18},"action":"insert","lines":["p"]},{"start":{"row":404,"column":18},"end":{"row":404,"column":19},"action":"insert","lines":["e"]},{"start":{"row":404,"column":19},"end":{"row":404,"column":20},"action":"insert","lines":["c"]},{"start":{"row":404,"column":20},"end":{"row":404,"column":21},"action":"insert","lines":["\""]},{"start":{"row":404,"column":21},"end":{"row":404,"column":22},"action":"insert","lines":[":"]}],[{"start":{"row":404,"column":22},"end":{"row":404,"column":23},"action":"insert","lines":[" "],"id":302}],[{"start":{"row":404,"column":22},"end":{"row":404,"column":23},"action":"remove","lines":[" "],"id":303},{"start":{"row":404,"column":21},"end":{"row":404,"column":22},"action":"remove","lines":[":"]},{"start":{"row":404,"column":20},"end":{"row":404,"column":21},"action":"remove","lines":["\""]}],[{"start":{"row":404,"column":20},"end":{"row":404,"column":21},"action":"insert","lines":["\""],"id":304}],[{"start":{"row":404,"column":21},"end":{"row":404,"column":22},"action":"insert","lines":[" "],"id":305}],[{"start":{"row":404,"column":21},"end":{"row":404,"column":22},"action":"remove","lines":[" "],"id":306},{"start":{"row":404,"column":20},"end":{"row":404,"column":21},"action":"remove","lines":["\""]}],[{"start":{"row":404,"column":20},"end":{"row":404,"column":21},"action":"insert","lines":[":"],"id":307}],[{"start":{"row":404,"column":21},"end":{"row":404,"column":22},"action":"insert","lines":[" "],"id":308}],[{"start":{"row":404,"column":78},"end":{"row":405,"column":0},"action":"insert","lines":["",""],"id":309},{"start":{"row":405,"column":0},"end":{"row":405,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":403,"column":127},"end":{"row":404,"column":0},"action":"insert","lines":["",""],"id":310},{"start":{"row":404,"column":0},"end":{"row":404,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":404,"column":8},"end":{"row":404,"column":9},"action":"insert","lines":["M"],"id":311},{"start":{"row":404,"column":9},"end":{"row":404,"column":10},"action":"insert","lines":["A"]},{"start":{"row":404,"column":10},"end":{"row":404,"column":11},"action":"insert","lines":["y"]},{"start":{"row":404,"column":11},"end":{"row":404,"column":12},"action":"insert","lines":["b"]},{"start":{"row":404,"column":12},"end":{"row":404,"column":13},"action":"insert","lines":["e"]}],[{"start":{"row":404,"column":13},"end":{"row":404,"column":14},"action":"insert","lines":[" "],"id":312},{"start":{"row":404,"column":14},"end":{"row":404,"column":15},"action":"insert","lines":["s"]},{"start":{"row":404,"column":15},"end":{"row":404,"column":16},"action":"insert","lines":["o"]},{"start":{"row":404,"column":16},"end":{"row":404,"column":17},"action":"insert","lines":["m"]},{"start":{"row":404,"column":17},"end":{"row":404,"column":18},"action":"insert","lines":["e"]},{"start":{"row":404,"column":18},"end":{"row":404,"column":19},"action":"insert","lines":["t"]},{"start":{"row":404,"column":19},"end":{"row":404,"column":20},"action":"insert","lines":["h"]},{"start":{"row":404,"column":20},"end":{"row":404,"column":21},"action":"insert","lines":["i"]},{"start":{"row":404,"column":21},"end":{"row":404,"column":22},"action":"insert","lines":["n"]},{"start":{"row":404,"column":22},"end":{"row":404,"column":23},"action":"insert","lines":["g"]}],[{"start":{"row":404,"column":23},"end":{"row":404,"column":24},"action":"insert","lines":[" "],"id":313},{"start":{"row":404,"column":24},"end":{"row":404,"column":25},"action":"insert","lines":["l"]},{"start":{"row":404,"column":25},"end":{"row":404,"column":26},"action":"insert","lines":["i"]},{"start":{"row":404,"column":26},"end":{"row":404,"column":27},"action":"insert","lines":["k"]},{"start":{"row":404,"column":27},"end":{"row":404,"column":28},"action":"insert","lines":["e"]}],[{"start":{"row":404,"column":28},"end":{"row":404,"column":29},"action":"insert","lines":[" "],"id":314},{"start":{"row":404,"column":29},"end":{"row":404,"column":30},"action":"insert","lines":["t"]},{"start":{"row":404,"column":30},"end":{"row":404,"column":31},"action":"insert","lines":["h"]},{"start":{"row":404,"column":31},"end":{"row":404,"column":32},"action":"insert","lines":["i"]},{"start":{"row":404,"column":32},"end":{"row":404,"column":33},"action":"insert","lines":["s"]},{"start":{"row":404,"column":33},"end":{"row":404,"column":34},"action":"insert","lines":[":"]}],[{"start":{"row":404,"column":34},"end":{"row":405,"column":0},"action":"insert","lines":["",""],"id":315},{"start":{"row":405,"column":0},"end":{"row":405,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":405,"column":8},"end":{"row":408,"column":9},"action":"insert","lines":["<packaging>jar</packaging>"," <build>","   <finalName>WhatEverYouLikey</finalName>"," </build>"],"id":316}],[{"start":{"row":406,"column":1},"end":{"row":406,"column":2},"action":"insert","lines":[" "],"id":317}],[{"start":{"row":406,"column":2},"end":{"row":406,"column":4},"action":"insert","lines":["  "],"id":318}],[{"start":{"row":406,"column":4},"end":{"row":406,"column":6},"action":"insert","lines":["  "],"id":319}],[{"start":{"row":406,"column":6},"end":{"row":406,"column":8},"action":"insert","lines":["  "],"id":320}],[{"start":{"row":407,"column":3},"end":{"row":407,"column":4},"action":"insert","lines":[" "],"id":321}],[{"start":{"row":407,"column":4},"end":{"row":407,"column":6},"action":"insert","lines":["  "],"id":322}],[{"start":{"row":407,"column":6},"end":{"row":407,"column":8},"action":"insert","lines":["  "],"id":323}],[{"start":{"row":407,"column":8},"end":{"row":407,"column":10},"action":"insert","lines":["  "],"id":324}],[{"start":{"row":408,"column":1},"end":{"row":408,"column":2},"action":"insert","lines":[" "],"id":325}],[{"start":{"row":408,"column":2},"end":{"row":408,"column":4},"action":"insert","lines":["  "],"id":326}],[{"start":{"row":408,"column":4},"end":{"row":408,"column":6},"action":"insert","lines":["  "],"id":327}],[{"start":{"row":408,"column":6},"end":{"row":408,"column":8},"action":"insert","lines":["  "],"id":328}],[{"start":{"row":404,"column":9},"end":{"row":404,"column":10},"action":"remove","lines":["A"],"id":329}],[{"start":{"row":404,"column":9},"end":{"row":404,"column":10},"action":"insert","lines":["a"],"id":330}],[{"start":{"row":404,"column":8},"end":{"row":404,"column":10},"action":"insert","lines":["# "],"id":331},{"start":{"row":405,"column":8},"end":{"row":405,"column":10},"action":"insert","lines":["# "]},{"start":{"row":406,"column":8},"end":{"row":406,"column":10},"action":"insert","lines":["# "]},{"start":{"row":407,"column":8},"end":{"row":407,"column":10},"action":"insert","lines":["# "]},{"start":{"row":408,"column":8},"end":{"row":408,"column":10},"action":"insert","lines":["# "]}],[{"start":{"row":409,"column":8},"end":{"row":410,"column":0},"action":"insert","lines":["",""],"id":332},{"start":{"row":410,"column":0},"end":{"row":410,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":403,"column":8},"end":{"row":404,"column":0},"action":"insert","lines":["",""],"id":333},{"start":{"row":404,"column":0},"end":{"row":404,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":402,"column":89},"end":{"row":403,"column":0},"action":"insert","lines":["",""],"id":334},{"start":{"row":403,"column":0},"end":{"row":403,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":403,"column":8},"end":{"row":403,"column":9},"action":"insert","lines":["#"],"id":335}],[{"start":{"row":403,"column":9},"end":{"row":403,"column":10},"action":"insert","lines":[" "],"id":336}],[{"start":{"row":409,"column":23},"end":{"row":409,"column":39},"action":"remove","lines":["WhatEverYouLikey"],"id":337},{"start":{"row":409,"column":23},"end":{"row":409,"column":24},"action":"insert","lines":["p"]},{"start":{"row":409,"column":24},"end":{"row":409,"column":25},"action":"insert","lines":["i"]},{"start":{"row":409,"column":25},"end":{"row":409,"column":26},"action":"insert","lines":["p"]},{"start":{"row":409,"column":26},"end":{"row":409,"column":27},"action":"insert","lines":["e"]},{"start":{"row":409,"column":27},"end":{"row":409,"column":28},"action":"insert","lines":["l"]},{"start":{"row":409,"column":28},"end":{"row":409,"column":29},"action":"insert","lines":["i"]},{"start":{"row":409,"column":29},"end":{"row":409,"column":30},"action":"insert","lines":["n"]},{"start":{"row":409,"column":30},"end":{"row":409,"column":31},"action":"insert","lines":["e"]}],[{"start":{"row":409,"column":31},"end":{"row":409,"column":32},"action":"insert","lines":["-"],"id":338},{"start":{"row":409,"column":32},"end":{"row":409,"column":33},"action":"insert","lines":["p"]},{"start":{"row":409,"column":33},"end":{"row":409,"column":34},"action":"insert","lines":["o"]}],[{"start":{"row":409,"column":33},"end":{"row":409,"column":34},"action":"remove","lines":["o"],"id":339},{"start":{"row":409,"column":32},"end":{"row":409,"column":33},"action":"remove","lines":["p"]}],[{"start":{"row":409,"column":32},"end":{"row":409,"column":33},"action":"insert","lines":["o"],"id":340},{"start":{"row":409,"column":33},"end":{"row":409,"column":34},"action":"insert","lines":["u"]},{"start":{"row":409,"column":34},"end":{"row":409,"column":35},"action":"insert","lines":["t"]},{"start":{"row":409,"column":35},"end":{"row":409,"column":36},"action":"insert","lines":["p"]},{"start":{"row":409,"column":36},"end":{"row":409,"column":37},"action":"insert","lines":["u"]},{"start":{"row":409,"column":37},"end":{"row":409,"column":38},"action":"insert","lines":["t"]},{"start":{"row":409,"column":38},"end":{"row":409,"column":39},"action":"insert","lines":["."]}],[{"start":{"row":409,"column":39},"end":{"row":409,"column":40},"action":"insert","lines":["j"],"id":341},{"start":{"row":409,"column":40},"end":{"row":409,"column":41},"action":"insert","lines":["a"]},{"start":{"row":409,"column":41},"end":{"row":409,"column":42},"action":"insert","lines":["r"]}],[{"start":{"row":348,"column":85},"end":{"row":348,"column":149},"action":"insert","lines":["--zip-file fileb://./target/lambda-java-example-1.0-SNAPSHOT.jar"],"id":342}],[{"start":{"row":348,"column":149},"end":{"row":348,"column":150},"action":"insert","lines":[" "],"id":343}],[{"start":{"row":348,"column":150},"end":{"row":348,"column":151},"action":"insert","lines":["#"],"id":344}],[{"start":{"row":348,"column":150},"end":{"row":349,"column":0},"action":"insert","lines":["",""],"id":345},{"start":{"row":349,"column":0},"end":{"row":349,"column":16},"action":"insert","lines":["                "]}],[{"start":{"row":349,"column":17},"end":{"row":349,"column":18},"action":"insert","lines":[" "],"id":346}],[{"start":{"row":349,"column":16},"end":{"row":349,"column":109},"action":"remove","lines":["# --s3-bucket mehs-lambda-deploy-east --s3-key lambda-java-example-1.0-SNAPSHOT.jar --publish"],"id":347}],[{"start":{"row":404,"column":141},"end":{"row":405,"column":0},"action":"insert","lines":["",""],"id":348},{"start":{"row":405,"column":0},"end":{"row":405,"column":8},"action":"insert","lines":["        "]},{"start":{"row":405,"column":8},"end":{"row":405,"column":9},"action":"insert","lines":["v"]},{"start":{"row":405,"column":9},"end":{"row":405,"column":10},"action":"insert","lines":["s"]}],[{"start":{"row":405,"column":10},"end":{"row":405,"column":11},"action":"insert","lines":[" "],"id":349}],[{"start":{"row":405,"column":11},"end":{"row":405,"column":104},"action":"insert","lines":["# --s3-bucket mehs-lambda-deploy-east --s3-key lambda-java-example-1.0-SNAPSHOT.jar --publish"],"id":350}],[{"start":{"row":405,"column":8},"end":{"row":405,"column":9},"action":"insert","lines":["#"],"id":351}],[{"start":{"row":405,"column":9},"end":{"row":405,"column":10},"action":"insert","lines":[" "],"id":352}],[{"start":{"row":348,"column":113},"end":{"row":348,"column":145},"action":"remove","lines":["lambda-java-example-1.0-SNAPSHOT"],"id":353},{"start":{"row":348,"column":113},"end":{"row":348,"column":114},"action":"insert","lines":["p"]},{"start":{"row":348,"column":114},"end":{"row":348,"column":115},"action":"insert","lines":["i"]},{"start":{"row":348,"column":115},"end":{"row":348,"column":116},"action":"insert","lines":["p"]},{"start":{"row":348,"column":116},"end":{"row":348,"column":117},"action":"insert","lines":["r"]}],[{"start":{"row":348,"column":116},"end":{"row":348,"column":117},"action":"remove","lines":["r"],"id":354}],[{"start":{"row":348,"column":116},"end":{"row":348,"column":117},"action":"insert","lines":["e"],"id":355},{"start":{"row":348,"column":117},"end":{"row":348,"column":118},"action":"insert","lines":["l"]},{"start":{"row":348,"column":118},"end":{"row":348,"column":119},"action":"insert","lines":["i"]},{"start":{"row":348,"column":119},"end":{"row":348,"column":120},"action":"insert","lines":["n"]},{"start":{"row":348,"column":120},"end":{"row":348,"column":121},"action":"insert","lines":["e"]}],[{"start":{"row":348,"column":121},"end":{"row":348,"column":122},"action":"insert","lines":["-"],"id":356},{"start":{"row":348,"column":122},"end":{"row":348,"column":123},"action":"insert","lines":["o"]},{"start":{"row":348,"column":123},"end":{"row":348,"column":124},"action":"insert","lines":["u"]},{"start":{"row":348,"column":124},"end":{"row":348,"column":125},"action":"insert","lines":["t"]},{"start":{"row":348,"column":125},"end":{"row":348,"column":126},"action":"insert","lines":["p"]},{"start":{"row":348,"column":126},"end":{"row":348,"column":127},"action":"insert","lines":["u"]},{"start":{"row":348,"column":127},"end":{"row":348,"column":128},"action":"insert","lines":["t"]}],[{"start":{"row":347,"column":16},"end":{"row":347,"column":100},"action":"remove","lines":["- aws s3 cp target/lambda-java-example-1.0-SNAPSHOT.jar s3://mehs-lambda-deploy-east"],"id":357}],[{"start":{"row":405,"column":13},"end":{"row":405,"column":14},"action":"insert","lines":["#"],"id":358}],[{"start":{"row":405,"column":14},"end":{"row":405,"column":15},"action":"insert","lines":[" "],"id":359}],[{"start":{"row":405,"column":15},"end":{"row":405,"column":99},"action":"insert","lines":["- aws s3 cp target/lambda-java-example-1.0-SNAPSHOT.jar s3://mehs-lambda-deploy-east"],"id":360}],[{"start":{"row":405,"column":99},"end":{"row":406,"column":0},"action":"insert","lines":["",""],"id":361},{"start":{"row":406,"column":0},"end":{"row":406,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":405,"column":13},"end":{"row":406,"column":0},"action":"insert","lines":["",""],"id":362},{"start":{"row":406,"column":0},"end":{"row":406,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":407,"column":10},"end":{"row":407,"column":77},"action":"insert","lines":["aws lambda update-function-code --function-name ${rLambdaFunction} "],"id":363}],[{"start":{"row":407,"column":10},"end":{"row":407,"column":11},"action":"insert","lines":["-"],"id":364}],[{"start":{"row":407,"column":11},"end":{"row":407,"column":12},"action":"insert","lines":[" "],"id":365}],[{"start":{"row":347,"column":14},"end":{"row":347,"column":16},"action":"remove","lines":["  "],"id":366},{"start":{"row":347,"column":12},"end":{"row":347,"column":14},"action":"remove","lines":["  "]},{"start":{"row":347,"column":10},"end":{"row":347,"column":12},"action":"remove","lines":["  "]},{"start":{"row":347,"column":8},"end":{"row":347,"column":10},"action":"remove","lines":["  "]},{"start":{"row":347,"column":6},"end":{"row":347,"column":8},"action":"remove","lines":["  "]},{"start":{"row":347,"column":4},"end":{"row":347,"column":6},"action":"remove","lines":["  "]},{"start":{"row":347,"column":2},"end":{"row":347,"column":4},"action":"remove","lines":["  "]},{"start":{"row":347,"column":0},"end":{"row":347,"column":2},"action":"remove","lines":["  "]}],[{"start":{"row":346,"column":29},"end":{"row":347,"column":0},"action":"remove","lines":["",""],"id":367}],[{"start":{"row":348,"column":14},"end":{"row":348,"column":16},"action":"remove","lines":["  "],"id":369},{"start":{"row":348,"column":12},"end":{"row":348,"column":14},"action":"remove","lines":["  "]},{"start":{"row":348,"column":10},"end":{"row":348,"column":12},"action":"remove","lines":["  "]},{"start":{"row":348,"column":8},"end":{"row":348,"column":10},"action":"remove","lines":["  "]},{"start":{"row":348,"column":6},"end":{"row":348,"column":8},"action":"remove","lines":["  "]},{"start":{"row":348,"column":4},"end":{"row":348,"column":6},"action":"remove","lines":["  "]},{"start":{"row":348,"column":2},"end":{"row":348,"column":4},"action":"remove","lines":["  "]},{"start":{"row":348,"column":0},"end":{"row":348,"column":2},"action":"remove","lines":["  "]}],[{"start":{"row":347,"column":133},"end":{"row":348,"column":0},"action":"remove","lines":["",""],"id":370}],[{"start":{"row":347,"column":22},"end":{"row":348,"column":22},"action":"insert","lines":["s3 cp target/lambda-java-example-1.0-SNAPSHOT.jar s3://mehs-lambda-deploy-east","                - aws "],"id":371},{"start":{"row":348,"column":87},"end":{"row":348,"column":89},"action":"remove","lines":["zi"]},{"start":{"row":348,"column":87},"end":{"row":348,"column":111},"action":"insert","lines":["s3-bucket mehs-lambda-de"]},{"start":{"row":348,"column":112},"end":{"row":348,"column":125},"action":"insert","lines":["loy-east --s3"]},{"start":{"row":348,"column":126},"end":{"row":348,"column":129},"action":"remove","lines":["fil"]},{"start":{"row":348,"column":126},"end":{"row":348,"column":127},"action":"insert","lines":["k"]},{"start":{"row":348,"column":128},"end":{"row":348,"column":129},"action":"insert","lines":["y"]},{"start":{"row":348,"column":130},"end":{"row":348,"column":132},"action":"remove","lines":["fi"]},{"start":{"row":348,"column":131},"end":{"row":348,"column":132},"action":"remove","lines":["e"]},{"start":{"row":348,"column":131},"end":{"row":348,"column":133},"action":"insert","lines":["am"]},{"start":{"row":348,"column":134},"end":{"row":348,"column":140},"action":"remove","lines":["://./t"]},{"start":{"row":348,"column":134},"end":{"row":348,"column":140},"action":"insert","lines":["da-jav"]},{"start":{"row":348,"column":141},"end":{"row":348,"column":143},"action":"remove","lines":["rg"]},{"start":{"row":348,"column":141},"end":{"row":348,"column":142},"action":"insert","lines":["-"]},{"start":{"row":348,"column":143},"end":{"row":348,"column":147},"action":"remove","lines":["t/pi"]},{"start":{"row":348,"column":143},"end":{"row":348,"column":146},"action":"insert","lines":["xam"]},{"start":{"row":348,"column":147},"end":{"row":348,"column":148},"action":"remove","lines":["e"]},{"start":{"row":348,"column":148},"end":{"row":348,"column":150},"action":"remove","lines":["in"]},{"start":{"row":348,"column":150},"end":{"row":348,"column":156},"action":"remove","lines":["output"]},{"start":{"row":348,"column":150},"end":{"row":348,"column":162},"action":"insert","lines":["1.0-SNAPSHOT"]},{"start":{"row":348,"column":167},"end":{"row":348,"column":176},"action":"insert","lines":["--publish"]},{"start":{"row":403,"column":141},"end":{"row":406,"column":170},"action":"remove","lines":["","        # vs ","        # - aws s3 cp target/lambda-java-example-1.0-SNAPSHOT.jar s3://mehs-lambda-deploy-east","        # - aws lambda update-function-code --function-name ${rLambdaFunction} --s3-bucket mehs-lambda-deploy-east --s3-key lambda-java-example-1.0-SNAPSHOT.jar --publish"]}],[{"start":{"row":398,"column":91},"end":{"row":399,"column":0},"action":"insert","lines":["",""],"id":372},{"start":{"row":399,"column":0},"end":{"row":399,"column":8},"action":"insert","lines":["        "]},{"start":{"row":399,"column":8},"end":{"row":399,"column":9},"action":"insert","lines":["$"]}],[{"start":{"row":399,"column":8},"end":{"row":399,"column":9},"action":"remove","lines":["$"],"id":373}],[{"start":{"row":399,"column":8},"end":{"row":399,"column":9},"action":"insert","lines":["#"],"id":374}],[{"start":{"row":399,"column":9},"end":{"row":399,"column":10},"action":"insert","lines":[" "],"id":375},{"start":{"row":399,"column":10},"end":{"row":399,"column":11},"action":"insert","lines":["c"]},{"start":{"row":399,"column":11},"end":{"row":399,"column":12},"action":"insert","lines":["h"]},{"start":{"row":399,"column":12},"end":{"row":399,"column":13},"action":"insert","lines":["a"]},{"start":{"row":399,"column":13},"end":{"row":399,"column":14},"action":"insert","lines":["n"]},{"start":{"row":399,"column":14},"end":{"row":399,"column":15},"action":"insert","lines":["g"]},{"start":{"row":399,"column":15},"end":{"row":399,"column":16},"action":"insert","lines":["e"]},{"start":{"row":399,"column":16},"end":{"row":399,"column":17},"action":"insert","lines":["d"]}],[{"start":{"row":399,"column":17},"end":{"row":399,"column":18},"action":"insert","lines":[" "],"id":376},{"start":{"row":399,"column":18},"end":{"row":399,"column":19},"action":"insert","lines":["h"]},{"start":{"row":399,"column":19},"end":{"row":399,"column":20},"action":"insert","lines":["a"]},{"start":{"row":399,"column":20},"end":{"row":399,"column":21},"action":"insert","lines":["n"]},{"start":{"row":399,"column":21},"end":{"row":399,"column":22},"action":"insert","lines":["d"]},{"start":{"row":399,"column":22},"end":{"row":399,"column":23},"action":"insert","lines":["l"]},{"start":{"row":399,"column":23},"end":{"row":399,"column":24},"action":"insert","lines":["e"]},{"start":{"row":399,"column":24},"end":{"row":399,"column":25},"action":"insert","lines":["r"]}],[{"start":{"row":399,"column":25},"end":{"row":399,"column":26},"action":"insert","lines":[" "],"id":377},{"start":{"row":399,"column":26},"end":{"row":399,"column":27},"action":"insert","lines":["o"]},{"start":{"row":399,"column":27},"end":{"row":399,"column":28},"action":"insert","lines":["n"]}],[{"start":{"row":399,"column":28},"end":{"row":399,"column":29},"action":"insert","lines":[" "],"id":378},{"start":{"row":399,"column":29},"end":{"row":399,"column":30},"action":"insert","lines":["l"]},{"start":{"row":399,"column":30},"end":{"row":399,"column":31},"action":"insert","lines":["i"]},{"start":{"row":399,"column":31},"end":{"row":399,"column":32},"action":"insert","lines":["n"]},{"start":{"row":399,"column":32},"end":{"row":399,"column":33},"action":"insert","lines":["e"]}],[{"start":{"row":399,"column":33},"end":{"row":399,"column":34},"action":"insert","lines":[" "],"id":379},{"start":{"row":399,"column":34},"end":{"row":399,"column":35},"action":"insert","lines":["3"]},{"start":{"row":399,"column":35},"end":{"row":399,"column":36},"action":"insert","lines":["7"]},{"start":{"row":399,"column":36},"end":{"row":399,"column":37},"action":"insert","lines":["8"]}],[{"start":{"row":405,"column":8},"end":{"row":406,"column":176},"action":"insert","lines":["                - aws s3 cp target/lambda-java-example-1.0-SNAPSHOT.jar s3://mehs-lambda-deploy-east","                - aws lambda update-function-code --function-name ${rLambdaFunction} --s3-bucket mehs-lambda-deploy-east --s3-key lambda-java-example-1.0-SNAPSHOT.jar --publish"],"id":380}],[{"start":{"row":406,"column":176},"end":{"row":406,"column":177},"action":"insert","lines":["\\"],"id":381}],[{"start":{"row":406,"column":176},"end":{"row":406,"column":177},"action":"remove","lines":["\\"],"id":382}],[{"start":{"row":406,"column":176},"end":{"row":407,"column":0},"action":"insert","lines":["",""],"id":383},{"start":{"row":407,"column":0},"end":{"row":407,"column":16},"action":"insert","lines":["                "]}],[{"start":{"row":406,"column":16},"end":{"row":406,"column":17},"action":"insert","lines":[" "],"id":384},{"start":{"row":406,"column":17},"end":{"row":406,"column":18},"action":"insert","lines":["#"]}],[{"start":{"row":405,"column":18},"end":{"row":405,"column":19},"action":"insert","lines":["#"],"id":385}],[{"start":{"row":405,"column":16},"end":{"row":405,"column":18},"action":"remove","lines":["  "],"id":386},{"start":{"row":405,"column":14},"end":{"row":405,"column":16},"action":"remove","lines":["  "]},{"start":{"row":405,"column":12},"end":{"row":405,"column":14},"action":"remove","lines":["  "]},{"start":{"row":405,"column":10},"end":{"row":405,"column":12},"action":"remove","lines":["  "]},{"start":{"row":405,"column":8},"end":{"row":405,"column":10},"action":"remove","lines":["  "]}],[{"start":{"row":405,"column":14},"end":{"row":405,"column":15},"action":"remove","lines":[" "],"id":387},{"start":{"row":405,"column":12},"end":{"row":405,"column":14},"action":"remove","lines":["  "]},{"start":{"row":405,"column":10},"end":{"row":405,"column":12},"action":"remove","lines":["  "]}],[{"start":{"row":406,"column":16},"end":{"row":406,"column":17},"action":"remove","lines":[" "],"id":388},{"start":{"row":406,"column":14},"end":{"row":406,"column":16},"action":"remove","lines":["  "]},{"start":{"row":406,"column":12},"end":{"row":406,"column":14},"action":"remove","lines":["  "]},{"start":{"row":406,"column":10},"end":{"row":406,"column":12},"action":"remove","lines":["  "]},{"start":{"row":406,"column":8},"end":{"row":406,"column":10},"action":"remove","lines":["  "]}],[{"start":{"row":404,"column":10},"end":{"row":404,"column":11},"action":"insert","lines":["-"],"id":389}],[{"start":{"row":404,"column":11},"end":{"row":404,"column":12},"action":"insert","lines":[" "],"id":390}],[{"start":{"row":347,"column":16},"end":{"row":348,"column":176},"action":"remove","lines":["- aws s3 cp target/lambda-java-example-1.0-SNAPSHOT.jar s3://mehs-lambda-deploy-east","                - aws lambda update-function-code --function-name ${rLambdaFunction} --s3-bucket mehs-lambda-deploy-east --s3-key lambda-java-example-1.0-SNAPSHOT.jar --publish"],"id":391},{"start":{"row":347,"column":16},"end":{"row":347,"column":149},"action":"insert","lines":["- aws lambda update-function-code --function-name ${rLambdaFunction} --zip-file fileb://./target/lambda-java-example-1.0-SNAPSHOT.jar"]}]]},"ace":{"folds":[{"start":{"row":68,"column":11},"end":{"row":120,"column":75},"placeholder":"..."},{"start":{"row":130,"column":16},"end":{"row":173,"column":27},"placeholder":"..."},{"start":{"row":177,"column":20},"end":{"row":215,"column":45},"placeholder":"..."},{"start":{"row":218,"column":22},"end":{"row":247,"column":50},"placeholder":"..."}],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":392,"column":53},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1536074928560}